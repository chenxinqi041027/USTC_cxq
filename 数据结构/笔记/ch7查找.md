# <center>ch7查找</center>

> 查找运算，线性表，树表，哈希……

==查找算法的评价指标==

$ASL = \sum\limits^{n}_{i = 1}p_ic_i$

+ n是记录的个数
+ $p_i$——查找的第i个记录的概率
+ $c_i$——找到的第i个记录所需的比较次数



## 线性表查找

### 顺序查找

+ （优化）从后向前查找

```cpp
int Search_Seq( SSTable  ST , KeyType  key ){
   //若成功返回其位置信息，否则返回0
  ST.R[0].key =key;   
 for( i=ST.length; ST.R[ i ].key!=key;  - - i  );
 //不用for(i=n; i>0; - -i) 或 for(i=1; i<=n; i++)  
   return i; 
}
```

+ 分析

> 空间复杂度：一个辅助空间
>
> 时间复杂度：查找成功时的平均查找长度，$ASL_s(n) = (1+2+……+n)/n = (n+1)/2$
>
> 查找不成功时，平均查找长度为$ASL_f = n+1$

+ 特点
  + 算法简单，无结构要求
  + n大时查找效率低
  + 优化：不是等概率查找时，可以按照查找概率排序



### 折半查找

+ low = 1,high = n,$mid = \lfloor(low+high)/2\rfloor$
+ k == R[mid].key,成功
+ k<R[mid].key,high = mid-1
+ k>R[mid].key,low = mid+1
+ 当low>high查找失败



> 查找成功时的比较次数不超过查找树的深度$d = \lfloor log_2n\rfloor +1$——$O(log_2n)$
>
> 查找不成功就是走了一条从根节点到外部节点的路径d或者d-1
>
> 适用于有序表，不宜用链式结构



### 分块查找

> 块间有序，块内无序
>
> 对索引表折半查找，找到子表后，进行顺序查找法

> 查找效率：$ASL=L_b+L_W$($L_b$是对索引表查找的ASL，$L_W$是对块内查找的ASL)
>
> $ASL_{bs} = log_2(\frac{n}{s}+1)+\frac{s}{2}$

> 优点：无需进行大量移动
>
> 缺点：需要增加一个索引表的空间
>
> 如果线性表既要快速查找又要动态变化，则可以采用分块查找





## 树表的查找

### 二叉排序树

> 左子树小于右子树，递归

+ 查找

  小于根节点查找左子树，大于根节点查找右子树，等于则成功

  ```cpp
  BSTree SearchBST(BSTree T,KeyType key) {
     if((!T) || key==T->data.key) return T;       	 
     else if (key<T->data.key)  return SearchBST(T->lchild,key);	//在左子树中继续查找
     else return SearchBST(T->rchild,key);    		   		//在右子树中继续查找
  } // SearchBST
  ```

+ 时间分析

  + 最坏情况：单支树，ASL=(n+1)/2
  + 最好情况，约为log2n
  + 平均情况O(lgn)

+ 插入

```cpp
void InsertBST(BSTree &T, ElemType e)
{//当二叉排序树T中不存在关键字等于e.key的数据元素时，则插入该元素
	if(!T) {			//找到插入位置，递归结束
		S=new BSTNode;		//生成新节点*s
		S->data=e;
		S->lchild=S->rchild=NULL;
		T=S;
	}
	else if(e.key<T->data.key)
		InsertBST(T->lchild,e);	//将*s插入左子树
	else if(e.key>T->data.key)
		InsertBST(T->rchild,e);	//将*s插入右子树
}
```

+ 生成
  + n个结点能生成n!个数（BST）
  + 中序序列有序
  + 平均时间：O(nlgn)

+ 删除
  + 缺右子树用左子女填补
  + 缺左子树用右子女填补
  + 左右子树都有，找中序第一个结点填补





### 平衡二叉树（AVL）

> 左子树右子树树深度之差绝对值不大于1，左子树右子树也是平衡二叉树
>
> 平衡因子：左子树深度减去右子树深度

> 平均时间复杂度$O(log_2n)$

+ 平衡化旋转
  + LL型——顺时针旋转
  + LR型——左子树先逆时针旋转，根节点再顺时针旋转
  + RL型——右子树先顺时针旋转，根节点再逆时针旋转
  + RR型——逆时针旋转
+ 插入



### B-树

> 完全平衡的多阶查找树
>
> m阶B-树，每个结点最多有m个孩子，m叉平衡排序树
>
> + 所有叶子在同一层上
> + 每个非根非叶节点中的关键字数目j满足$\lceil m/2\rceil-1<=j<=m-1$（前面要留一个结点存储该节点中关键字的个数）



#### 插入





#### 删除

+ 结点中的关键字个数$>\lceil m/2\rceil-1$,直接删除
+ 结点中关键字个数$=\lceil m/2\rceil-1$
  + 左/右兄弟的结点中关键字个数$>\lceil m/2\rceil-1$,将结点N左/右兄弟结点中最大/最小的关键字上移到其父节点中，父结点中大于/小于且紧靠上移关键字的关键字下移到结点N
  + 左/右兄弟结点中的关键字数$=\lceil m/2\rceil-1$，删除结点N中的关键字，再将结点N中的关键字、指针与其兄弟结点以及分割二者的父结点中的某个关键字Ki，合并为一个结点，若因此使父结点中的关键字个数$<\lceil m/2\rceil-1$，则依次类推



### B+树

与B-树差异

+ 结点有n棵子树，则必须有n个关键字
+ 所有叶子结点中包含了全部记录的关键字信息以及这些关键字记录的指针，而且叶子结点按关键字的大小从小到大顺序链接
+ 所有的非叶子结点可以看成是索引的部分，结点中只含有其子树的根结点中的最大(或最小)关键字。



#### 查找

#### 删除

#### 插入

**未仔细看**









### 红黑树

> 对称二叉树
>
> 在时间O(logn)时间内查找





## 哈希表

> Loc(i) = H(keyi)

#### 构造方法

+ 直接定址法
  + Hash(key)=a*key+b
  + 优点：线性函数，不易产生冲突
  + 缺点：要占用连续的地址空间，空间效率低
+ 平方取中法
  + 平方后去掉末尾两位数，取中间3位，地址范围0~999
+ **除留余数法**
  + Hash(key) = key mod p
  + 选取合适的p：表长为m,p<m且p为质数
+ 处理冲突的方法
  + 开放地址：
    + 线性探测$h_i = (h(k)+d_i)$%m
    + 二次探测
    + 伪随机探测                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
  + 链地址





























